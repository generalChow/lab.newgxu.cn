<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>用户认证 - 信息发布平台</title>
<meta name="keywords" content=" 雨无声实验室 广西大学 广西大学雨无声网站 龙凯 longkai @爱因斯坦的狗 im.longkai@gmail.com" />
<meta name="description" content=" 雨无声实验室 广西大学 广西大学雨无声网站 龙凯 longkai @爱因斯坦的狗 im.longkai@gmail.com" />
<meta name="author" content="龙凯 longkai @爱因斯坦的狗" />
<meta name="email" content="im.longkai@gmail.com" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="/resources/libs/bootstrap/2.3.1/css/bootstrap.min.css" media="screen" />
<link rel="stylesheet" href="/resources/libs/bootstrap/2.3.1/css/bootstrap-responsive.min.css" media="screen" />
<style type="text/css">
body {
	padding: 60px 0 40px 0;
}
#auth {
  max-width: 680px;
  margin: 20px auto;
}
.alert {
	display: none;
}
</style>
</head>
<body>
<div class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container">
			<a href="#" class="brand">信息发布平台</a>
			<div class="nav-collapse collapse">
				<ul class="nav">
					<li><a href="#">首页</a></li>
					<li><a href="#">关于</a></li>
					<li class="active"><a href="#">认证</a></li>
					<li><a href="#">认证列表</a></li>
					<li><a href="#">服务条款</a></li>
					<li><a href="#">更新说明</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">雨无声实验室 <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="/">首页</a></li>
							<li><a href="/about.html">关于实验室</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="container" id="auth">
	<div class="alert alert-success" id="success">
		<p id="msg">认证成功！您的账号为 <span id="account"></span> <span id="_pwd"></span></p>
	</div>
	<div class="alert alert-error" id="error">
		<p>认证失败！<span id="info"></span> <span id="reason"></span></p>
	</div>
	<form class="form-horizontal" method="post" action="#" id="auth_form">
		<div class="control-group">
	  	<label class="control-label" for="authorizedName">显示名称</label>
	    <div class="controls">
	      <input type="text" id="authorizedName" name="authorizedName" placeholder="显示在信息发布处" required />
	    </div>
	  </div>
	  <div class="control-group">
	  	<label class="control-label" for="org">来自</label>
	    <div class="controls">
	      <input type="text" id="org" name="org" placeholder="组织，单位，或者个人" required />
	    </div>
	  </div>
	  <div class="control-group">
	  	<label class="control-label" for="contact">联系方式</label>
	    <div class="controls">
	      <input type="text" id="contact" name="contact" placeholder="电子邮件或者电话" required />
	    </div>
	  </div>
	  <div class="control-group">
	  	<label class="control-label" for="account">登陆账号</label>
	    <div class="controls">
	      <input type="text" id="account" name="account" placeholder="可选，由系统生成" />
	    </div>
	  </div>
	  <div class="control-group">
	  	<label class="control-label" for="password">密码</label>
	    <div class="controls">
	      <input type="password" id="password" name="password" placeholder="可选，由系统生成" />
	    </div>
	  </div>
	  <div class="control-group">
	  	<label class="control-label" for="inputPassword">确认密码</label>
	    <div class="controls">
	      <input type="password" id="inputPassword" name="_pwd" placeholder="可选，由系统生成" />
	    </div>
	  </div>
	  <div class="control-group">
	  	<label class="control-label" for="about">关于自己</label>
	    <div class="controls">
	      <textarea rows="3" name="about" placeholder="简单地介绍一下自己吧:)"></textarea>
	    </div>
	  </div>
	  <div class="control-group">
	    <div class="controls">
				<a href="#myModal" role="button" class="btn btn-success" data-toggle="modal">认证注册</a>
	    </div>
	  </div>
	</form>
		<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-header">
		    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
		    <h3 id="myModalLabel">雨无声信息发布条款</h3>
		  </div>
		  <div class="modal-body">
		    <p>雨无声信息发布条款！</p>
		  </div>
		  <div class="modal-footer">
		    <button class="btn btn-danger" id="no" data-dismiss="modal" aria-hidden="true">拒绝</button>
		    <button class="btn btn-success" id="yes" data-dismiss="modal" aria-hidden="true">接受</button>
		  </div>
		</div>
</div>
</body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
!window.jQuery && document.write('<script src="/resources/js/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"><\/script>');
</script>
<script src="/resources/libs/bootstrap/2.3.1/js/bootstrap.min.js"></script>
<script type="text/javascript">
$(function() {
	$('#yes').click(function() {
		$('.alert').hide();
		var params = $('#auth_form').serialize();
		$.ajax({
			type: 'POST',
			url: '/info/auth',
			data: params,
			dataType: 'json',
			success: function(data) {
				if (data.status === 'ok') {
					$('#account').text(data.account);
					if (data.auto_pwd === 'yes') {
						$('#_pwd').text('系统生成密码为 ' + data.password + ' 请尽快修改！');
					}
					$('#success').fadeIn();
				} else if (data.status === 'no') {
					$('#info').text(data.msg);
					$('#reason').text('原因：' + data.reason);
					$('#error').fadeIn();
				} else {
					$('#error').fadeIn();
				}
			},
			error: function() {
				$('#error').fadeIn();
			}
		})
	})
})
</script>
</html>